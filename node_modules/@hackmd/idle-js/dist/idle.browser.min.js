var Idle=function(){"use strict";function i(){}return class{constructor(e){this.isAway=!1,this.awayTimeout=3e3,this.awayTimestamp=0,this.awayTimer=null,this.onAway=i,this.onAwayBack=i,this.onVisible=i,this.onHidden=i,this.listener=null,e&&(this.awayTimeout=parseInt(e.awayTimeout,10),this.onAway=e.onAway||i,this.onAwayBack=e.onAwayBack||i,this.onVisible=e.onVisible||i,this.onHidden=e.onHidden||i);const t=()=>this.onActive();window.addEventListener("click",t),window.addEventListener("mousemove",t),window.addEventListener("mouseenter",t),window.addEventListener("keydown",t),window.addEventListener("scroll",t),window.addEventListener("mousewheel",t),window.addEventListener("touchmove",t),window.addEventListener("touchstart",t)}onActive(){return this.awayTimestamp=(new Date).getTime()+this.awayTimeout,this.isAway&&(this.onAwayBack(),this.start()),this.isAway=!1,!0}start(){return this.listener||(this.listener=(i=>{this.handleVisibilityChange()}),document.addEventListener("visibilitychange",this.listener,!1),document.addEventListener("webkitvisibilitychange",this.listener,!1),document.addEventListener("msvisibilitychange",this.listener,!1)),this.awayTimestamp=(new Date).getTime()+this.awayTimeout,null!==this.awayTimer&&clearTimeout(this.awayTimer),this.awayTimer=window.setTimeout(()=>{this.checkAway()},this.awayTimeout+100),this}stop(){return null!=this.awayTimer&&clearTimeout(this.awayTimer),null!==this.listener&&(document.removeEventListener("visibilitychange",this.listener),document.removeEventListener("webkitvisibilitychange",this.listener),document.removeEventListener("msvisibilitychange",this.listener),this.listener=null),this}setAwayTimeout(i){return this.awayTimeout=i,this}checkAway(){const i=(new Date).getTime();if(i<this.awayTimestamp)return this.isAway=!1,void(this.awayTimer=window.setTimeout(()=>{this.checkAway()},this.awayTimestamp-i+100));null!=this.awayTimer&&clearTimeout(this.awayTimer),this.isAway=!0,this.onAway()}handleVisibilityChange(){document.hidden||document.msHidden||document.webkitHidden?this.onHidden():this.onVisible()}}}();window.Idle=Idle;
